= nav_bar fluid: :top, responsive: true, brand: "MyBudget" do
  = menu_group do
    = menu_item "Home", root_path
    
    = menu_item "Review #{badge review_count}".html_safe, review_path
    
    = drop_down "Transactions" do

      = menu_item "All  #{badge transactions_count}".html_safe, transactions_path

      - if Account.count > 0
        = drop_down_submenu "By Account" do
          - Account.all.each do |account|
            = menu_item "#{badge account.transactions_count} #{account.name}".html_safe, transactions_path(q: {account_id_eq: account.id})

      - if Category.count > 0
        = drop_down_submenu "By Category" do
          = render collection: [Category.income, Category.expense], partial: "layouts/category"

    = drop_down "Reports" do
      = menu_item "Monthly Cashflow", current_monthly_cashflow_report_path
      = menu_item "Monthly Budget", current_monthly_budget_report_path
      = menu_item "Monthly Debt", monthly_debt_report_path
      = menu_item "Monthly Totals by Category", category_spending_reports_path

  = menu_group pull: :right do
    = drop_down "Settings" do
      = menu_item "Accounts", accounts_path
      = menu_item "Categories", categories_path
      = menu_item "Import Settings", "#"
